<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link rel="stylesheet" href="/css/login.css" />
  </head>

  <body>
    <div class="login-box">
      <div class="login">
        <header>Login</header>
      </div>
      <form id="loginForm">
        <div class="input-box">
          <input
            type="email"
            id="loginEmail"
            class="in-x"
            placeholder="Enter e-mail"
            autocomplete="off"
            required
          />
        </div>
        <div class="input-box">
          <input
            type="password"
            id="loginPassword"
            class="in-x"
            placeholder="Enter password"
            autocomplete="off"
            required
          />
        </div>
        <div class="forgot">
          <section>
            <input type="checkbox" id="check" />
            <label for="check">Remember me</label>
          </section>
          <section>
            <a href="#">Forgot password?</a>
          </section>
        </div>
        <div class="submit">
          <button type="submit" class="submit-btn" id="submit">Sign In</button>
        </div>
        <div class="sing-up-link">
          <p>Don't have an account? <a href="signup.html">Sign up</a></p>
        </div>
      </form>
    </div>

    <!-- Link the external JS auth module -->
    <script type="module">
      import { loginUser } from "./js/auth.js";

      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("loginForm");

        form.addEventListener("submit", async (e) => {
          e.preventDefault();

          const email = document.getElementById("loginEmail").value;
          const password = document.getElementById("loginPassword").value;

          const user = await loginUser(email, password);
          if (user) {
            // âœ… Success
            alert("Login successful!");
            // Redirect or store admin in localStorage if needed
            localStorage.setItem("admin", JSON.stringify(user));
            window.location.href = "adminDashboard.html";
          }
        });
      });
    </script>
  </body>
</html>
